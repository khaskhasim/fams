{% extends "layout.html" %}
{% block title %}Telegram Alert Settings{% endblock %}

{% block content %}

<div class="max-w-2xl mx-auto">

  <!-- ================= HEADER ================= -->
  <div class="mb-8">
    <h1 class="text-3xl font-extrabold
               bg-gradient-to-r from-blue-500 via-cyan-400 to-emerald-400
               bg-clip-text text-transparent">
      Telegram Alert
    </h1>
    <p class="text-sm text-slate-500 mt-1">
      Konfigurasi notifikasi Telegram untuk sistem monitoring ISP
    </p>
  </div>

  <!-- ================= CONFIG CARD ================= -->
  <form method="post"
        action="/settings/telegram"
        class="rounded-3xl
               bg-white dark:bg-slate-800
               border border-slate-200 dark:border-slate-700
               shadow-xl p-6 space-y-6">

    <!-- ENABLE -->
    <div class="flex items-center gap-4
                px-5 py-4 rounded-2xl
                bg-slate-100 dark:bg-slate-700">
      <input type="checkbox"
             name="enabled"
             id="enabled"
             class="w-5 h-5 accent-emerald-600"
             {% if telegram and telegram.enabled %}checked{% endif %}>
      <label for="enabled"
             class="font-semibold text-slate-700 dark:text-slate-200">
        Aktifkan Telegram Alert
      </label>
    </div>

    <!-- BOT TOKEN -->
    <div>
      <label class="block text-sm font-semibold mb-1">
        Bot Token
      </label>
      <input type="text"
             name="token"
             value="{{ telegram.bot_token if telegram else '' }}"
             placeholder="123456:AAAbbbCCC..."
             class="w-full px-4 py-2 rounded-lg
                    border border-slate-300
                    bg-slate-50 dark:bg-slate-700
                    focus:ring-2 focus:ring-blue-500
                    focus:outline-none text-sm">
      <p class="text-xs text-slate-400 mt-1">
        Token bot dari <strong>BotFather</strong>
      </p>
    </div>

    <!-- CHAT ID -->
    <div>
      <label class="block text-sm font-semibold mb-1">
        Chat ID
      </label>
      <input type="text"
             name="chat_id"
             value="{{ telegram.chat_id if telegram else '' }}"
             placeholder="-100xxxxxxxxxx"
             class="w-full px-4 py-2 rounded-lg
                    border border-slate-300
                    bg-slate-50 dark:bg-slate-700
                    focus:ring-2 focus:ring-blue-500
                    focus:outline-none text-sm">
      <p class="text-xs text-slate-400 mt-1">
        Bisa berupa <strong>chat pribadi</strong> atau <strong>grup Telegram</strong>
      </p>
    </div>

    <!-- ACTION -->
    <div class="pt-4 flex justify-end">
      <button type="submit"
              class="inline-flex items-center gap-2
                     px-8 py-3 rounded-xl
                     bg-gradient-to-r from-blue-600 to-indigo-600
                     hover:from-blue-700 hover:to-indigo-700
                     text-white font-bold shadow-lg">
        ðŸ’¾ Simpan Konfigurasi
      </button>
    </div>

  </form>

  <!-- ================= TEST TELEGRAM ================= -->
  <form method="post"
        action="/settings/telegram/test"
        class="mt-8 rounded-3xl
               bg-white dark:bg-slate-800
               border border-slate-200 dark:border-slate-700
               shadow-xl p-6">

    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">

      <div>
        <h2 class="text-xl font-bold text-slate-800 dark:text-slate-100">
          Test Telegram
        </h2>
        <p class="text-sm text-slate-500">
          Kirim pesan uji coba untuk memastikan konfigurasi berhasil
        </p>
      </div>

      <button type="submit"
              class="inline-flex items-center gap-2
                     px-6 py-3 rounded-xl
                     bg-gradient-to-r from-emerald-500 to-green-600
                     hover:from-emerald-600 hover:to-green-700
                     text-white font-bold shadow-lg">
        ðŸš€ Test Kirim
      </button>

    </div>

  </form>

</div>

{% endblock %}
